(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={item:"ImageGalleryItem_item__2ey0n",image:"ImageGalleryItem_image__2xsbt"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__2GjdW",modal:"Modal_modal__P3_V5"}},13:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__gboaM",center:"ImageGallery_center__1xxlp"}},18:function(e,t,a){e.exports={button:"Button_button__3QF_k"}},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(7),s=a.n(c),o=a(3),i=a(5),u=a.n(i),l=a(0);var h=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(l.jsx)("header",{className:u.a.header,children:Object(l.jsxs)("form",{className:u.a.form,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return alert("Enter query search");t(c),s("")},children:[Object(l.jsx)("button",{type:"submit",className:u.a.button,children:Object(l.jsx)("span",{className:u.a.label,children:"Search"})}),Object(l.jsx)("input",{className:u.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){s(e.target.value)}})]})})},b=a(14),j=a(4),m=a.n(j),d=a(9),f=a(15),g=a.n(f),p=a(16),O=a(17),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://pixabay.com/api/";Object(p.a)(this,e),this.url=t,this._searchQuery="",this._page=1,this._totalImages=0,this._api="1030453-4271fa747ef92e686e2b519ac"}return Object(O.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"totalImages",get:function(){return this._totalImages},set:function(e){return this._totalImages=e}},{key:"querySearch",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.url,"?q=").concat(this._searchQuery,"&page=").concat(this._page,"&key=").concat(this._api,"&orientation=horizontal&per_page=12"));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,this.totalImages=a.total,e.abrupt("return",a.hits);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),v=_,y=a(11),x=a.n(y);var S=function(e){var t=e.images,a=e.onOpenModal;return t.map((function(e){var t=e.id,n=e.webformatURL,r=e.largeImageURL;return Object(l.jsx)("li",{id:t,className:x.a.item,children:Object(l.jsx)("a",{href:r,onClick:a,children:Object(l.jsx)("img",{src:n,"data-modal":r,alt:"",className:x.a.image})})},t)}))},k=a(18),w=a.n(k);var I=function(e){var t=e.onClick;return Object(l.jsx)("button",{className:w.a.button,onClick:t,children:"Load more"})},N=a(12),E=a.n(N);var M=function(e){var t=e.children,a=e.onOpenModal;Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"!==e.code&&e.currentTarget!==e.target||a(e)};return Object(c.createPortal)(Object(l.jsx)("div",{className:E.a.overlay,onClick:r,children:Object(l.jsx)("div",{className:E.a.modal,children:t})}),document.getElementById("modal-root"))},Q=a(13),C=a.n(Q),q=new v,B="idle",F="pending",G="resolved",L="rejected",P="empty";var T=function(e){var t=e.searchQuery,a=Object(n.useState)(B),r=Object(o.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)([]),u=Object(o.a)(i,2),h=u[0],j=u[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),O=p[0],_=p[1],v=Object(n.useState)(null),y=Object(o.a)(v,2),x=y[0],k=y[1],w=Object(n.useState)(0),N=Object(o.a)(w,2),E=N[0],Q=N[1],T=Object(n.useState)(null),D=Object(o.a)(T,2),U=D[0],J=D[1];Object(n.useEffect)((function(){if(""!==t){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(F),e.prev=1,q.searchQuery=t,q.resetPage(),e.next=6,q.querySearch();case 6:a=e.sent,j(a),s((function(){return a.length>0?G:P})),Q((function(){return q.totalImages>12?q.totalImages-12:0})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),J(e.t0),s(L);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}}),[t]);var R=function(e){e.preventDefault();var t=e.currentTarget.href;_((function(e){return!e})),k(t)};return c===B?Object(l.jsx)(l.Fragment,{}):c===P?Object(l.jsx)("p",{children:"Sorry, but nothing matched your search terms. Please try again with some different keywords."}):c===F?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(g.a,{className:C.a.center,type:"ThreeDots",color:"#3f51b5",height:100,width:100})}):c===G?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("ul",{className:C.a.gallery,id:"gallery-images",children:Object(l.jsx)(S,{images:h,onOpenModal:R})}),E>0&&Object(l.jsx)(I,{onClick:function(){q.page=1,q.querySearch().then((function(e){j((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),Q((function(e){return e-12})),window.scrollTo({top:document.getElementById("gallery-images").scrollHeight,behavior:"smooth"})}))}}),O&&Object(l.jsx)(M,{onOpenModal:R,children:Object(l.jsx)("img",{src:x,alt:""})})]}):c===L?Object(l.jsx)("p",{children:U.message}):void 0};var D=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(h,{onSubmit:r}),Object(l.jsx)(T,{searchQuery:a})]})};a(45);s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={header:"Searchbar_header__34uEY",form:"Searchbar_form__XuKjc",button:"Searchbar_button__MhnaU",label:"Searchbar_label__1BV3w",input:"Searchbar_input__2C4aO"}}},[[46,1,2]]]);
//# sourceMappingURL=main.0c377127.chunk.js.map